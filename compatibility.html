<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç „ÅÇ„Å™„Åü„Å®„ÄÅ„Å™„Çã„Åπ„Åè‰ºö„ÅÑ„Åü„Åè„Å™„ÅÑ‰∫∫Ë®∫Êñ≠</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=M+PLUS+Rounded+1c:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background: linear-gradient(135deg, #0a0a23 0%, #1a1a3a 50%, #0d1b2a 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .container {
            position: relative;
            z-index: 10;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid #00ffff;
            color: #00ffff;
            padding: 10px 20px;
            border-radius: 20px;
            text-decoration: none;
            font-family: 'Orbitron', monospace;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .logo {
            font-family: 'Orbitron', monospace;
            font-size: 2.2em;
            font-weight: 900;
            margin-bottom: 15px;
            text-shadow: 0 0 20px #ff6b6b;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { text-shadow: 0 0 20px #ff6b6b; }
            50% { text-shadow: 0 0 30px #ff6b6b, 0 0 40px #ff6b6b; }
        }

        .subtitle {
            font-size: 1.1em;
            color: #ffa500;
            margin-bottom: 20px;
            font-style: italic;
        }

        .description {
            font-size: 0.95em;
            color: #cccccc;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }

        .input-form {
            background: rgba(255, 107, 107, 0.05);
            border: 2px solid #ff6b6b;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
        }

        .input-form::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 107, 107, 0.1), transparent);
            animation: scan 3s infinite;
        }

        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .form-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.3em;
            color: #ff6b6b;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .input-group {
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .input-label {
            display: block;
            font-weight: bold;
            color: #ffa500;
            margin-bottom: 10px;
            font-family: 'Orbitron', monospace;
        }

        .input-select {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #ffffff;
            font-size: 1em;
            font-family: 'M PLUS Rounded 1c', sans-serif;
            transition: all 0.3s ease;
        }

        .input-select:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.3);
        }

        .input-select option {
            background: #1a1a3a;
            color: #ffffff;
        }

        .diagnose-button {
            width: 100%;
            max-width: 300px;
            margin: 30px auto 0;
            padding: 15px 30px;
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            border: none;
            border-radius: 25px;
            font-family: 'Orbitron', monospace;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            display: block;
        }

        .diagnose-button:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.5);
        }

        .diagnose-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
            font-family: 'Orbitron', monospace;
            color: #ff6b6b;
        }

        .loading.active {
            display: block;
        }

        .loading-text {
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .loading-animation {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
        }

        .wave-dot {
            width: 12px;
            height: 12px;
            background: #ff6b6b;
            border-radius: 50%;
            animation: wave 1.5s ease-in-out infinite;
        }

        .wave-dot:nth-child(2) { animation-delay: 0.2s; }
        .wave-dot:nth-child(3) { animation-delay: 0.4s; }
        .wave-dot:nth-child(4) { animation-delay: 0.6s; }

        @keyframes wave {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1.2); opacity: 1; }
        }

        .result-area {
            display: none;
            margin: 30px 0;
        }

        .result-area.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .result-section {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #666;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .result-section.user-info {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.05);
        }

        .result-section.worst-match {
            border-color: #ff6b6b;
            background: rgba(255, 107, 107, 0.05);
        }

        .result-section.codename {
            border-color: #ffa500;
            background: rgba(255, 165, 0, 0.05);
        }

        .result-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-title.user { color: #00ffff; }
        .result-title.worst { color: #ff6b6b; }
        .result-title.code { color: #ffa500; }

        .type-display {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffffff;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }

        .codename-main {
            font-size: 1.8em;
            font-weight: bold;
            color: #ffa500;
            text-align: center;
            margin: 20px 0;
            font-family: 'Orbitron', monospace;
            text-shadow: 0 0 10px rgba(255, 165, 0, 0.5);
        }

        .codename-alias {
            font-size: 1.1em;
            color: #ffdd44;
            text-align: center;
            margin: 15px 0;
            font-style: italic;
        }

        .codename-description {
            font-size: 1em;
            color: #cccccc;
            line-height: 1.6;
            margin: 15px 0;
        }

        .countermeasure {
            background: rgba(0, 255, 0, 0.1);
            border-left: 4px solid #00ff00;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .countermeasure-title {
            color: #00ff00;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Orbitron', monospace;
        }

        .testimony {
            background: rgba(255, 255, 0, 0.1);
            border-left: 4px solid #ffff00;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-style: italic;
        }

        .testimony-title {
            color: #ffff00;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Orbitron', monospace;
        }

        .share-section {
            margin-top: 30px;
            text-align: center;
            padding: 25px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .share-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.1em;
            color: #ff6b6b;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }

        .share-button {
            display: inline-block;
            padding: 12px 25px;
            margin: 8px;
            background: linear-gradient(45deg, #ff6b6b, #ffa500, #ff6b6b);
            background-size: 200% 200%;
            color: white;
            border: none;
            border-radius: 25px;
            font-family: 'Orbitron', monospace;
            font-size: 0.9em;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
            animation: shareGlow 2s ease-in-out infinite alternate;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .share-button:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.6);
        }

        @keyframes shareGlow {
            0% { 
                box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
                background-position: 0% 50%;
            }
            100% { 
                box-shadow: 0 4px 25px rgba(255, 107, 107, 0.5);
                background-position: 100% 50%;
            }
        }

        .restart-button {
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid #00ffff;
            color: #00ffff;
            padding: 12px 25px;
            border-radius: 20px;
            font-family: 'Orbitron', monospace;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .restart-button:hover {
            background: rgba(0, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: #888;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .logo {
                font-size: 1.8em;
            }
            
            .container {
                padding: 15px;
            }
            
            .input-form {
                padding: 20px;
            }
            
            .back-button {
                position: static;
                margin-bottom: 20px;
                display: inline-block;
            }
        }
    </style>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <a href="#" class="back-button" onclick="history.back()">‚Üê „Éà„ÉÉ„Éó„Å´Êàª„Çã</a>
        
        <header class="header">
            <h1 class="logo">üîç ZURE MATCHÔºà„Ç∫„É¨„Éû„ÉÉ„ÉÅÔºâ</h1>
            <p class="subtitle">„Åô„ÇåÈÅï„ÅÜ„Å®„ÅÑ„ÅÜ„Çà„Çä„ÄÅ„Åü„Å∂„ÇìÈÅï„ÅÜÊ¨°ÂÖÉ„ÅÆ‰∫∫„ÄÇÂÆáÂÆô„ÅÆ„Ç∫„É¨„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ</p>
            <p class="description">
                MBTI„ÉªË°ÄÊ∂≤Âûã„ÉªÊòüÂ∫ß„Åã„Çâ„ÄÅ„ÅÇ„Å™„Åü„Å´„Å®„Å£„Å¶"„Å™„Çã„Åπ„ÅèË∑ùÈõ¢„ÇíÂèñ„Çä„Åü„ÅÑ‰∫∫"„Çí„Ç´„Çπ„É©„ÅåÂÖ®Âäõ„ÅßÊäΩÂá∫„Åó„Åæ„Åô„ÄÇ<br>
                ‰ø°È†º„Åß„Åç„ÇãÁµ±Ë®à„Éá„Éº„ÇøÔºà„Å®„ÄÅ„Ç´„Çπ„É©„ÅÆÂÅèË¶ãÔºâ„Å´„ÇÇ„Å®„Å•„ÅÑ„Å¶„ÄÅÁõ∏ÊÄßÊúÄÊÇ™„ÅÆ„Çø„Ç§„Éó„Å®„ÄÅ„ÇÇ„ÅóÂá∫‰ºö„Å£„Å¶„Åó„Åæ„Å£„ÅüÂ†¥Âêà„ÅÆÂØæÂá¶Ê≥ï„Åæ„Åß„ÅîÊ°àÂÜÖ„Åó„Åæ„Åô„ÄÇ
            </p>
        </header>

        <main>
            <div class="input-form">
                <h2 class="form-title">üìã „ÅÇ„Å™„Åü„ÅÆÂü∫Êú¨ÊÉÖÂ†±</h2>
                
                <div class="input-group">
                    <label class="input-label" for="mbtiSelect">MBTIÔºà16„Çø„Ç§„ÉóÔºâ</label>
                    <select class="input-select" id="mbtiSelect">
                        <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                        <option value="INTJ">INTJÔºàÂª∫ÁØâÂÆ∂Ôºâ</option>
                        <option value="INTP">INTPÔºàË´ñÁêÜÂ≠¶ËÄÖÔºâ</option>
                        <option value="ENTJ">ENTJÔºàÊåáÊèÆÂÆòÔºâ</option>
                        <option value="ENTP">ENTPÔºàË®éË´ñËÄÖÔºâ</option>
                        <option value="INFJ">INFJÔºàÊèêÂî±ËÄÖÔºâ</option>
                        <option value="INFP">INFPÔºà‰ª≤‰ªãËÄÖÔºâ</option>
                        <option value="ENFJ">ENFJÔºà‰∏ª‰∫∫ÂÖ¨Ôºâ</option>
                        <option value="ENFP">ENFPÔºàÂ∫ÉÂ†±ÈÅãÂãïÂÆ∂Ôºâ</option>
                        <option value="ISTJ">ISTJÔºàÁÆ°ÁêÜËÄÖÔºâ</option>
                        <option value="ISFJ">ISFJÔºàÊìÅË≠∑ËÄÖÔºâ</option>
                        <option value="ESTJ">ESTJÔºàÂππÈÉ®Ôºâ</option>
                        <option value="ESFJ">ESFJÔºàÈ†ò‰∫ãÂÆòÔºâ</option>
                        <option value="ISTP">ISTPÔºàÂ∑®Âå†Ôºâ</option>
                        <option value="ISFP">ISFPÔºàÂÜíÈô∫ÂÆ∂Ôºâ</option>
                        <option value="ESTP">ESTPÔºàËµ∑Ê•≠ÂÆ∂Ôºâ</option>
                        <option value="ESFP">ESFPÔºà„Ç®„É≥„Çø„Éº„ÉÜ„Ç§„Éä„ÉºÔºâ</option>
                    </select>
                </div>

                <div class="input-group">
                    <label class="input-label" for="bloodSelect">Ë°ÄÊ∂≤Âûã</label>
                    <select class="input-select" id="bloodSelect">
                        <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                        <option value="A">AÂûã</option>
                        <option value="B">BÂûã</option>
                        <option value="O">OÂûã</option>
                        <option value="AB">ABÂûã</option>
                    </select>
                </div>

                <div class="input-group">
                    <label class="input-label" for="zodiacSelect">ÊòüÂ∫ß</label>
                    <select class="input-select" id="zodiacSelect">
                        <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                        <option value="Áâ°ÁæäÂ∫ß">Áâ°ÁæäÂ∫ßÔºà3/21-4/19Ôºâ</option>
                        <option value="Áâ°ÁâõÂ∫ß">Áâ°ÁâõÂ∫ßÔºà4/20-5/20Ôºâ</option>
                        <option value="ÂèåÂ≠êÂ∫ß">ÂèåÂ≠êÂ∫ßÔºà5/21-6/21Ôºâ</option>
                        <option value="ËüπÂ∫ß">ËüπÂ∫ßÔºà6/22-7/22Ôºâ</option>
                        <option value="ÁçÖÂ≠êÂ∫ß">ÁçÖÂ≠êÂ∫ßÔºà7/23-8/22Ôºâ</option>
                        <option value="‰πôÂ•≥Â∫ß">‰πôÂ•≥Â∫ßÔºà8/23-9/22Ôºâ</option>
                        <option value="Â§©Áß§Â∫ß">Â§©Áß§Â∫ßÔºà9/23-10/23Ôºâ</option>
                        <option value="Ë†çÂ∫ß">Ë†çÂ∫ßÔºà10/24-11/22Ôºâ</option>
                        <option value="Â∞ÑÊâãÂ∫ß">Â∞ÑÊâãÂ∫ßÔºà11/23-12/21Ôºâ</option>
                        <option value="Â±±ÁæäÂ∫ß">Â±±ÁæäÂ∫ßÔºà12/22-1/19Ôºâ</option>
                        <option value="Ê∞¥Áì∂Â∫ß">Ê∞¥Áì∂Â∫ßÔºà1/20-2/18Ôºâ</option>
                        <option value="È≠öÂ∫ß">È≠öÂ∫ßÔºà2/19-3/20Ôºâ</option>
                    </select>
                </div>

                <button class="diagnose-button" id="diagnoseButton" onclick="startDiagnosis()">
                    üîç Áõ∏ÊÄßÊúÄÊÇ™„ÇíË®∫Êñ≠„Åô„Çã
                </button>
            </div>

            <div class="loading" id="loading">
                <div class="loading-text">„Ç´„Çπ„É©„ÅåÂÖ®Âäõ„ÅßÁõ∏ÊÄßÊúÄÊÇ™„ÇíÊäΩÂá∫‰∏≠...</div>
                <div class="loading-animation">
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                    <div class="wave-dot"></div>
                </div>
                <div style="font-size: 0.9em; color: #888; margin-top: 15px;">
                    Áµ±Ë®à„Éá„Éº„Çø„Å®ÂÅèË¶ã„ÇíÁÖßÂêà„Åó„Å¶„ÅÑ„Åæ„Åô...
                </div>
            </div>

            <div class="result-area" id="resultArea">
                <div class="result-section user-info">
                    <div class="result-title user">üë§ „ÅÇ„Å™„Åü„ÅÆÊÉÖÂ†±</div>
                    <div class="type-display" id="userType">
                        <!-- „É¶„Éº„Ç∂„Éº„ÅÆ„Çø„Ç§„Éó„ÅåË°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <div class="result-section worst-match">
                    <div class="result-title worst">‚ö†Ô∏è Áõ∏ÊÄßÊúÄÊÇ™„Å™Áõ∏Êâã</div>
                    <div style="font-weight: bold; color: #ff6b6b; margin-bottom: 10px;">„Åì„ÅÆ„Çø„Ç§„Éó„Å®„ÅØ„Åü„Å∂„ÇìÂêà„ÅÑ„Åæ„Åõ„ÇìÔºö</div>
                    <div class="type-display" id="worstType">
                        <!-- Áõ∏ÊÄßÊúÄÊÇ™„ÅÆ„Çø„Ç§„Éó„ÅåË°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <div class="result-section codename">
                    <div class="result-title code">üßæ „Ç≥„Éº„Éâ„Éç„Éº„É†</div>
                    <div class="codename-main" id="codeName">
                        <!-- „Ç≥„Éº„Éâ„Éç„Éº„É†„ÅåË°®Á§∫„Åï„Çå„Çã -->
                    </div>
                    <div class="codename-alias" id="codeAlias">
                        <!-- ÈÄöÁß∞„ÅåË°®Á§∫„Åï„Çå„Çã -->
                    </div>
                    <div class="codename-description" id="codeDescription">
                        <!-- Ë™¨Êòé„ÅåË°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <div class="countermeasure">
                    <div class="countermeasure-title">üí° Âá∫‰ºö„Å£„Å¶„Åó„Åæ„Å£„ÅüÂ†¥Âêà„ÅÆÂØæÂá¶Ê≥ï</div>
                    <div id="countermeasureText">
                        <!-- ÂØæÂá¶Ê≥ï„ÅåË°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <div class="testimony">
                    <div class="testimony-title">üì¢ „Ç´„ÇπË¢´ÂÆ≥Ë´á</div>
                    <div id="testimonyText">
                        <!-- Ë¢´ÂÆ≥Ë´á„ÅåË°®Á§∫„Åï„Çå„Çã -->
                    </div>
                </div>

                <div class="share-section">
                    <div class="share-title">üì¢ ÁµêÊûú„ÇíË¶ã„Åõ„Å≥„Çâ„Åã„Åô</div>
                    <button class="share-button" onclick="shareToTwitter()">
                        ùïè ÊúÄÊÇ™„Å™Âá∫‰ºö„ÅÑ„ÇíÊôí„Åô
                    </button>
                    <button class="share-button" onclick="shareToLine()">
                        üí¨ LINE„ÅßÂÖ±Êúâ
                    </button>
                    <div style="margin-top: 20px;">
                        <button class="restart-button" onclick="restartDiagnosis()">
                            üîÑ „ÇÇ„ÅÜ‰∏ÄÂ∫¶Ë®∫Êñ≠„Åô„Çã
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>‚Äª„Åì„ÅÆË®∫Êñ≠ÁµêÊûú„ÅØ„ÄÅ„Ç´„Çπ„É©„ÅÆÂÅèË¶ã„Å®ÈÅ©ÂΩì„Å™Áµ±Ë®à„Éá„Éº„Çø„Å´Âü∫„Å•„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ</p>
            <p>ÂÆüÈöõ„ÅÆ‰∫∫ÈñìÈñ¢‰øÇ„Å´ÊÇ™ÂΩ±Èüø„Çí‰∏é„Åà„Å¶„ÇÇ„ÄÅ‰∏ÄÂàáË≤¨‰ªª„ÅØË≤†„ÅÑ„Åæ„Åõ„Çì„ÄÇ</p>
        </footer>
    </div>

    <script>
        var currentResult = null;

        var mbtiMapping = {
            "ISTJ": { worstMatch: "ENFP", conflictType: 19 },
            "ISFJ": { worstMatch: "ENTP", conflictType: 16 },
            "INFJ": { worstMatch: "ESTP", conflictType: 13 },
            "INTJ": { worstMatch: "ESFP", conflictType: 8 },
            "ISTP": { worstMatch: "ESFJ", conflictType: 12 },
            "ISFP": { worstMatch: "ESTJ", conflictType: 2 },
            "INFP": { worstMatch: "ESTJ", conflictType: 1 },
            "INTP": { worstMatch: "ESFJ", conflictType: 11 },
            "ESTP": { worstMatch: "INFJ", conflictType: 13 },
            "ESFP": { worstMatch: "INTJ", conflictType: 7 },
            "ENFP": { worstMatch: "ISTJ", conflictType: 10 },
            "ENTP": { worstMatch: "ISFJ", conflictType: 6 },
            "ESTJ": { worstMatch: "INFP", conflictType: 5 },
            "ESFJ": { worstMatch: "ISTP", conflictType: 4 },
            "ENFJ": { worstMatch: "ISFP", conflictType: 15 },
            "ENTJ": { worstMatch: "ISFP", conflictType: 3 }
        };

        var mbtiPersonality = {
            "ISTJ": "„Åç„Å£„Å°„Çä„Åó„Å¶„Çã„ÅÆ„Å´„ÄÅ„Å™„Åú„ÅãÂë®Âõ≤„Åå„Åñ„Çè„Å§„Åè„ÄÇ",
            "ISFJ": "ÂÖ®Êñπ‰Ωç„Å´ÂÑ™„Åó„Åô„Åé„Å¶„ÄÅ„ÅÑ„Å§„ÇÇÂøÉ„ÅåÊ∂àËÄóÊ∞óÂë≥„ÄÇ",
            "INFJ": "„Å™„Çì„Å®„Å™„ÅèÂÖ®ÈÉ®„Çè„Åã„Å£„Å¶„Çã„Åë„Å©„ÄÅË®Ä„Çè„Å™„ÅÑ„ÅßË¶ãÂÆà„Çã„ÄÇ",
            "INTJ": "È†≠„ÅÆ‰∏≠„Åß10Âπ¥ÂÖà„ÅÆË®àÁîª„ÇíÁ´ã„Å¶„Å¶„Çã„ÄÇË©±„ÅØËÅû„ÅÑ„Å¶„ÇãÈ¢®„ÄÇ",
            "ISTP": "Â∑•ÂÖ∑„ÅÆ‰Ωø„ÅÑÊñπ„Å´Âì≤Â≠¶„ÇíÊÑü„Åò„Å¶„Çã„ÄÇË©±„ÅØÁü≠„ÅÑ„ÅåÁöÑÁ¢∫„ÄÇ",
            "ISFP": "Èùô„Åã„Å´ÁàÜÁô∫„Åó„Å¶„Çã„ÄÇÂÜÖ„Å™„Çã‰∏ñÁïå„Åå‰∏ÄÁï™Ë≥ë„ÇÑ„Åã„ÄÇ",
            "INFP": "ÁêÜÊÉ≥„ÅåË©∞„Åæ„Å£„ÅüÁÆ±„ÇíÊä±„Åà„Å¶„ÄÅ„Å©„Åì„Å∏„Åß„ÇÇË°å„Åç„Åü„ÅÑ„ÄÇ",
            "INTP": "ÈÄî‰∏≠„ÅßË©±„ÅåËÑ±Á∑ö„Åó„Å¶„ÇÇ„ÄÅ„Åù„Çå„ÅØ„Åù„Çå„ÅßÊÑèÂë≥„Åå„ÅÇ„Çã„ÄÇ",
            "ESTP": "‰ªä„Åì„ÅÆÁû¨Èñì„Å´Áîü„Åç„Å¶„Çã„ÄÇÊú™Êù•„ÅÆË©±„ÅØÊòéÊó•„ÄÇ",
            "ESFP": "Ê•Ω„Åó„Åï„ÅÆ„Ç¢„É≥„ÉÜ„Éä„Åå„Éî„Ç´„Éî„Ç´„Åó„Å¶„Çã„ÄÇÁõÆÁ´ã„Å°„Åü„ÅÑË®≥„Åò„ÇÉ„Å™„ÅÑ„ÄÇ",
            "ENFP": "ÊÉÖÁÜ±„Å®„Ç¢„Ç§„Éá„Ç¢„Å®ËÑ±Á∑ö„ÅßÊßãÊàê„Åï„Çå„ÅüËá™Áî±‰Ωì„ÄÇ",
            "ENTP": "Ë≠∞Ë´ñ„ÅåË∂£Âë≥„ÄÇÁµêË´ñ„Å´„ÅØ„ÅÇ„Åæ„ÇäËààÂë≥„Åå„Å™„ÅÑ„ÄÇ",
            "ESTJ": "„É™„Éº„ÉÄ„Éº„Çí„Åó„Å¶„Çã„Å®ËêΩ„Å°ÁùÄ„Åè„ÄÇÊåáÁ§∫Âá∫„Åó„ÅØÁÑ°ÊÑèË≠ò„ÄÇ",
            "ESFJ": "„Åø„Çì„Å™„ÇíÊ∞ó„Å´„Åó„Åô„Åé„Å¶Áñ≤„Çå„Çã„ÄÇ„Åß„ÇÇ„ÇÑ„ÇÅ„Çâ„Çå„Å™„ÅÑ„ÄÇ",
            "ENFJ": "‰ªñ‰∫∫„ÅÆ„ÉÜ„É≥„Ç∑„Éß„É≥ÁÆ°ÁêÜ„ÅåË∂£Âë≥„ÄÇËá™ÂàÜ„ÅÆÂàÜ„ÅØÂæåÂõû„Åó„ÄÇ",
            "ENTJ": "ÁõÆÊ®ôË®≠ÂÆö„ÅåÂ•Ω„Åç„Åô„Åé„Å¶„ÄÅ„Ç¥„Éº„É´„Çí„ÅÑ„Åè„Å§„ÇÇ‰Ωú„Å£„Å¶„Åó„Åæ„ÅÜ„ÄÇ"
        };

        var conflictTemplates = {
            1: "„Åì„ÅÆ„Çø„Ç§„Éó„ÅØÁõ¥ÊÑü„Å®ÊÑüÊÉÖ„ÅÆÂãï„Åç„ÇíÈáçË¶ñ„Åó„ÄÅË´ñÁêÜ„Çà„Çä„ÇÇÊ∞óÂàÜ„ÇíÂÑ™ÂÖà„Åó„Åå„Å°„Åß„Åô„ÄÇÊßãÈÄ†ÁöÑ„Å´Ë©±„Åô„Åª„Å©„ÄÅ„Å™„Çì„Åã„Ç§„É§„ÅßËøî„Åï„Çå„ÇãÂèØËÉΩÊÄß„ÅåÈ´ò„ÅÑ„Åß„Åô„ÄÇ",
            2: "Ë°ùÂãïÂûã„Åß„ÄÅÊÄù„ÅÑÁ´ã„Å£„Åü„Çâ„Åô„ÅêË°åÂãï„Å®„ÅÑ„ÅÜÊÄßË≥™„ÅåÂº∑„Åè„ÄÅ„É™„Çπ„ÇØ„ÇÑË®àÁîª„Çà„Çä„ÇÇ„Çπ„Éî„Éº„ÉâÂÑ™ÂÖà„ÄÇÊÖéÈáçÊ¥æ„ÅÆ„ÅÇ„Å™„Åü„Å´„ÅØÂ§©Êïµ„Åß„Åô„ÄÇ",
            3: "„É´„Éº„É´„ÇÑÊû†ÁµÑ„Åø„ÇíÂ§ß‰∫ã„Å´„Åô„ÇãÂÇæÂêë„Åå„ÅÇ„Çä„ÄÅÊüîËªüÊÄß„ÇÑÂç≥ËààÊÄß„Å´‰∏çÂÆâ„ÇíÊÑü„Åò„Çã„Çø„Ç§„Éó„Åß„Åô„ÄÇ„ÅÇ„Å™„Åü„ÅÆËá™Áî±„Åï„ÅØÁß©Â∫è„ÅÆÂ¥©Â£ä„Å´Ë¶ã„Åà„Çã„Åã„ÇÇ„Åó„Çå„Åæ„Åõ„Çì„ÄÇ",
            4: "Â§ñÂêëÊÄß„ÅåÈ´ò„Åè„ÄÅÂ∏∏„Å´‰∫∫„Å®„ÅÆÊé•ÁÇπ„ÇíÊ±Ç„ÇÅ„Çã„Çø„Ç§„Éó„Åß„ÄÅÈùô„Åë„Åï„ÇíÂ•Ω„ÇÄ„ÅÇ„Å™„Åü„Å´„ÅØÂà∫ÊøÄÈÅéÂ§ö„ÄÇ‰∏ÄÁ∑í„Å´„ÅÑ„Çã„Å†„Åë„ÅßÈõªÊ±†„ÅåÂàá„Çå„Åæ„Åô„ÄÇ",
            5: "ÊÑüÊÉÖ„ÇÑÊ∞óÊåÅ„Å°„Çà„Çä„ÇÇ„ÄÅÂäπÁéá„ÇÑÈÄ≤Ë°åÁÆ°ÁêÜ„ÇíÈáçË¶ñ„Åô„Çã„Çø„Ç§„Éó„Åß„Åô„ÄÇ„Çè„Åã„Å£„Å¶„Åª„Åó„ÅÑ„Å®ÊÄù„ÅÜÁû¨Èñì„ÄÅ„Åì„ÅÆ‰∫∫„ÅØToDo„É™„Çπ„Éà„ÇíÊõ¥Êñ∞„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
            6: "Ë´ñÁêÜÁöÑÊï¥ÂêàÊÄß„ÇíÊúÄÈáçË¶ñ„Åó„ÄÅÂ†¥„ÅÆÁ©∫Ê∞ó„ÇÑÊÑüÊÉÖ„Çí‰∫å„ÅÆÊ¨°„Å´„Åô„ÇãÂÇæÂêë„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„Åæ„ÅÇ„Åæ„ÅÇ„ÅßÊµÅ„Åó„Åü„ÅÑË©±È°å„Åß„ÇÇÂøÖ„ÅöËêΩ„Å®„ÅóÊâÄ„ÇíÊ§úË®º„Åó„Åæ„Åô„ÄÇ",
            7: "ËêΩ„Å°ÁùÄ„Åç„Å®Èùô„Åë„Åï„ÇíÊ±Ç„ÇÅ„Çã„ÅÇ„Å™„Åü„Å´„Å®„Å£„Å¶„ÄÅ„ÉÜ„É≥„Ç∑„Éß„É≥È´ò„ÇÅ„ÅßË©±„ÅóÁ∂ö„Åë„Çã„Åì„ÅÆ„Çø„Ç§„Éó„ÅØÂº∑Êïµ„ÄÇ‰∫îÊÑü„Åå„Åô„Åπ„Å¶Ë≥ë„ÇÑ„Åã„Å´Ë•≤„Çè„Çå„Åæ„Åô„ÄÇ",
            8: "ÁèæÂÆü„Å´Âü∫„Å•„ÅÑ„ÅüË®àÁîª„ÇíÈáçË¶ñ„Åô„Çã„Åì„ÅÆ„Çø„Ç§„Éó„ÅØ„ÄÅÂ§¢„ÇÑÂ∏åÊúõ„ÅÆË©±„Å´„É™„Ç¢„É™„ÉÜ„Ç£„ÇíÊ±Ç„ÇÅ„Åå„Å°„Åß„Åô„ÄÇ„Åµ„Çè„Å£„Å®„Åó„ÅüÁô∫ÊÉ≥„Åå„Åü„Å†„ÅÆÂπª„Å´Ë¶ã„Åà„Çã„Åã„ÇÇ„ÄÇ",
            9: "Ëá®Ê©üÂøúÂ§â„Åï„Çà„Çä„ÇÇËá™ÂàÜ„É´„Éº„É´„ÇíÂÑ™ÂÖà„Åó„ÄÅÁä∂Ê≥Å„ÇíÊüî„Çâ„Åã„ÅèË¶ã„Çã„ÅÆ„ÅåËã¶Êâã„Åß„Åô„ÄÇ„ÅÇ„Å™„Åü„ÅÆÊèêÊ°à„ÅØ„Åù„Çå„É´„Éº„É´„Å´„Å™„ÅÑ„Å®Ë®Ä„Çè„Çå„Å¶ÁµÇ‰∫Ü„ÄÇ",
            10: "Âã¢„ÅÑ„Å®ÊÑüË¶ö„ÅßÂãï„Åè„ÅÇ„Å™„Åü„Å´ÂØæ„Åó„ÄÅ„Åì„ÅÆ„Çø„Ç§„Éó„ÅØÂÖ®Â∑•Á®ã„ÇíË∏è„Åæ„Å™„ÅÑ„Å®Âãï„Åë„Åæ„Åõ„Çì„ÄÇ„Ç¢„Ç§„Éá„Ç¢„ÅØÊµÆ„Åã„Çì„Åß„ÇÇÂÆüË°å„ÅØ„Åª„ÅºÁÑ°ÁêÜ„ÄÇ",
            11: "ÊÉÖÁ∑íÁöÑ„Å™Â§âÂåñ„Å´ÂÖ±ÊÑü„Åó„Å•„Çâ„Åè„ÄÅÁâ©‰∫ã„Çí„ÇØ„Éº„É´„Å´ÂàÜÊûê„Åô„ÇãÂÇæÂêë„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„ÅÇ„Å™„Åü„ÅÆÊ∞óÊåÅ„Å°„ÅØÂÜ∑Èùô„Éï„Ç£„É´„Çø„Éº„ÅßÊ∞¥Ëí∏Ê∞ó„Å´„Åï„Çå„Åæ„Åô„ÄÇ",
            12: "ÂñúÊÄíÂìÄÊ•Ω„Çí„Åª„ÅºË°®„Å´Âá∫„Åï„Å™„ÅÑ„Åì„ÅÆ„Çø„Ç§„Éó„Å´„ÄÅ„ÅÇ„Å™„Åü„ÅØÂ∏∏„Å´ÁßÅ„ÄÅÂ´å„Çè„Çå„Å¶„ÇãÔºü„Å®„ÅÑ„ÅÜÈåØË¶ö„ÇíÊä±„Åç„Åæ„Åô„ÄÇ",
            13: "ÊÄùËÄÉ„Éª‰ΩúÊ•≠„Éª‰ºöË©±„ÅÆ„Éö„Éº„Çπ„ÅåÁúüÈÄÜ„Åß„ÄÅË©±„ÅåÂôõ„ÅøÂêà„ÅÜÈ†É„Å´„ÅØ„Å©„Å°„Çâ„Åã„ÅåÂéª„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ",
            14: "„ÅÇ„Å™„Åü„ÅÆ„Å™„Çì„Å®„Å™„Åè„Åå„ÄÅ„Åì„ÅÆ‰∫∫„Å´„ÅØË´ñÁêÜÁöÑÊ†πÊã†„Åå‰∏çÊòé„Å®„Åó„Å¶„ÅØ„Åò„Åã„Çå„Åæ„Åô„ÄÇ",
            15: "Ê±∫Êñ≠„ÇíÂÖ±Êúâ„Åó„Åü„ÅÑ„ÅÇ„Å™„Åü„Å´ÂØæ„Åó„ÄÅ„Åì„ÅÆ„Çø„Ç§„Éó„ÅØÂãùÊâã„Å´ÂÖ®ÈÉ®Ê±∫„ÇÅ„ÅüÂæå„Å´Â†±Âëä„Åó„Åæ„Åô„ÄÇ",
            16: "‰∏Ä„Å§„ÅÆ„Åì„Å®„ÇíÊ∑±„ÅèÊéò„Çä„Åü„ÅÑ„ÅÇ„Å™„Åü„Å´„Å®„Å£„Å¶„ÄÅ3ÂàÜ„ÅßË©±È°å„ÇíÂ§â„Åà„Çã„Åì„ÅÆ„Çø„Ç§„Éó„ÅØÊÉÖÂ†±ÁÅΩÂÆ≥„ÄÇ",
            17: "Â†¥„Çí„Å™„Åî„Åæ„Åõ„Åü„ÅÑ„ÅÇ„Å™„Åü„Å´„ÄÅ„Åì„ÅÆ‰∫∫„ÅØ„Åß„ÇÇ„Åù„ÇåÁüõÁõæ„Åó„Å¶„Å™„ÅÑÔºü„Å®Êñ¨„Çä„Åã„Åã„Å£„Å¶„Åç„Åæ„Åô„ÄÇ",
            18: "Êòî„ÇíÊáê„Åã„Åó„Åø„Åü„ÅÑ„ÅÇ„Å™„Åü„Å´„ÄÅ„Åì„ÅÆ‰∫∫„ÅØÂ∏∏„Å´‰ªä„ÅåÂ§ß‰∫ã„Åó„ÅãË®Ä„ÅÑ„Åæ„Åõ„Çì„ÄÇ",
            19: "Á¥∞ÈÉ®„Å´„Åì„Å†„Çè„Çä„Åü„ÅÑ„ÅÇ„Å™„Åü„Å´„Å®„Å£„Å¶„ÄÅ„Å†„ÅÑ„Åü„ÅÑ„Åß„Çà„Åè„Å™„ÅÑÔºü„ÅåÂè£Áôñ„ÅÆ„Åì„ÅÆ‰∫∫„ÅØËçíÈáé„Åù„ÅÆ„ÇÇ„ÅÆ„ÄÇ",
            20: "ÊÑüÊÉÖ„ÅÆÊµÅ„Çå„ÅßÊ±∫„ÇÅ„Çã„ÅÇ„Å™„Åü„Å´„ÄÅ„Åì„ÅÆ‰∫∫„ÅØ„Éá„Éº„Çø„Å®ÂàÜÊûê„ÅßÁ´ã„Å°„ÅØ„Å†„Åã„Çä„Åæ„Åô„ÄÇ"
        };

        var mbtiNicknames = {
            "ISTJ": "„Åç„Å£„Å°„ÇäÈï∑ÂÆò",
            "ISFJ": "„Åä„Åõ„Å£„Åã„ÅÑÂÆàË≠∑Á•û",
            "INFJ": "Èùô„Åã„Å™‰∫àË®ÄËÄÖ",
            "INTJ": "Êà¶Áï•„Éï„É´„Çπ„É≠„ÉÉ„Éà„É´",
            "ISTP": "Èªô„Å£„Å¶ÁµÑ„ÅøÁ´ã„Å¶„Çã‰∫∫",
            "ISFP": "„Åü„Åæ„Å´Ê∂à„Åà„ÇãË©©‰∫∫",
            "INFP": "Â§¢„ÇíË¶ã„Å¶„ÇãÈñì„Å´Â≠£ÁØÄ„ÅåÂ§â„Çè„Çã‰∫∫",
            "INTP": "„Å™„Åú„ÅåÂè£Áôñ„ÅÆÁ©∫Ë´ñÊ¥æ",
            "ESTP": "„Å®„Çä„ÅÇ„Åà„ÅöÈ£õ„Å≥Ëæº„ÇÄ‰∫∫",
            "ESFP": "„Éè„ÉÉ„Éî„ÉºÁàÜÂºæ",
            "ENFP": "‰∫àÂÆöË°®„ÅåÁ©∫„Å£„ÅΩ„ÅÆÂ∏åÊúõ",
            "ENTP": "Ë©±„Åô„Åü„Å≥„Å´Ë©±È°å„ÅåÂ§â„Çè„Çã‰∫∫",
            "ESTJ": "Ê±∫„ÇÅ„Åü„Åå„ÇäÈöäÈï∑",
            "ESFJ": "„Çπ„Ç±„Ç∏„É•„Éº„É´„Åß‰∫∫„ÇíÊÑõ„Åô‰∫∫",
            "ENFJ": "ÂÖ®Âì°‰∏ªÂΩπ„ÅåÂè£Áôñ„ÅÆ‰∫∫",
            "ENTJ": "Êäº„ÅóÂàá„ÇäÂäõ„Åì„ÅùÊ≠£Áæ©"
        };

        var testimonies = [
            "„Åì„ÅÆ„Çø„Ç§„Éó„Å®Âêå„ÅòËÅ∑Â†¥„Åß3ÈÄ±Èñì„ÄÅÁõÆ„ÇÇÂêà„Çè„Å™„Åã„Å£„Åü",
            "„Ç®„É¨„Éô„Éº„Çø„Éº„Åß‰∫å‰∫∫„Åç„Çä„Å´„Å™„Å£„ÅüÊôÇ„ÅÆÊ∞ó„Åæ„Åö„Åï„ÅåÂÆáÂÆôË¶èÊ®°",
            "Âêå„ÅòË∂£Âë≥„Å†„Å®ÊÄù„Å£„Åü„Çâ„ÄÅÂÖ®ÁÑ∂ÈÅï„ÅÜÊòü„ÅÆË©±„Å†„Å£„Åü",
            "„Åä„Å§„Åã„Çå„Åï„Åæ„Åß„Åô„Å†„Åë„Åß1Êó•„ÅåÁµÇ„Çè„Å£„Åü",
            "È£≤„Åø‰ºö„ÅßÈö£„ÅÆÂ∏≠„ÄÅ„Åä‰∫í„ÅÑÁÑ°Ë®Ä„ÅßÊñôÁêÜ„Å´ÈõÜ‰∏≠",
            "„Ç∞„É´„Éº„Éó„ÉØ„Éº„ÇØ„ÅßË¶ã‰∫ã„Å´‰ΩúÊ•≠„ÅåÈáçË§á„Åó„Å™„ÅÑ",
            "Â§©Ê∞ó„ÅÑ„ÅÑ„Åß„Åô„Å≠„Åù„ÅÜ„Åß„Åô„Å≠„Åß‰ºöË©±„ÅåÁµÇ‰∫Ü",
            "„Åì„ÅÆ„Çø„Ç§„Éó„Å®Âêå„Åò„ÉÅ„Éº„É†„ÄÅSlack„Å†„Åë„ÅßÂÆåÁµê„Åó„Åü",
            "Âªä‰∏ã„Åß„Åô„ÇåÈÅï„ÅÜÊôÇ„ÄÅ„Åä‰∫í„ÅÑÊê∫Â∏Ø„ÇíË¶ã„Çã",
            "Âêå„ÅòÈõªËªä„ÅÆËªä‰∏°„Å´‰πó„ÇäÂêà„Çè„Åõ„Çã„Å®„ÄÅ„Å™„Åú„ÅãÈÅÖÂª∂„Åô„Çã"
        ];

        var countermeasures = [
            "ÈÅ©Â∫¶„Å™Ë∑ùÈõ¢„Çí‰øù„Å°„ÄÅÂøÖË¶Å‰ª•‰∏ä„Å´Èñ¢„Çè„Çâ„Å™„ÅÑ„ÅÆ„ÅåÂêâ„ÄÇË°®Èù¢ÁöÑ„Å™Êå®Êã∂„Å†„Åë„ÅßÂçÅÂàÜ„Åß„Åô„ÄÇ",
            "Ë©±È°å„ÅØÂ§©Ê∞ó„Å®‰ªï‰∫ã„ÅÆÂ†±Âëä„ÅÆ„Åø„Å´Áµû„Çã„ÄÇÊ∑±„ÅÑË©±„ÅØÈÅø„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ",
            "„Ç∞„É´„Éº„Éó‰ΩúÊ•≠„Åß„ÅØÂΩπÂâ≤ÂàÜÊãÖ„ÇíÊòéÁ¢∫„Å´„Åó„ÄÅÂÄãÂà•„Å´‰ΩúÊ•≠„Åô„Çã„ÅÆ„Åå„Éô„Çπ„Éà„ÄÇ",
            "„É°„Éº„É´„ÇÑ„ÉÅ„É£„ÉÉ„Éà„Åß„ÅÆÈÄ£Áµ°„ÇíÂøÉ„Åå„Åë„ÄÅÁõ¥Êé•ÁöÑ„Å™Êé•Ëß¶„ÇíÊúÄÂ∞èÈôê„Å´„ÄÇ",
            "„Åì„ÅÆ„Çø„Ç§„Éó„ÅÆÊÑèË¶ã„Å´„ÅØ„Åù„ÅÜ„Åß„Åô„Å≠„Å®Áõ∏„Å•„Å°„ÇíÊâì„Å°„ÄÅËá™ÂàÜ„ÅÆ‰∏ªÂºµ„ÅØÊéß„Åà„ÇÅ„Å´„ÄÇ",
            "1ÂØæ1„ÅÆÊôÇÈñì„Çí‰Ωú„Çâ„Åö„ÄÅÂøÖ„ÅöÁ¨¨‰∏âËÄÖ„Åå„ÅÑ„ÇãÂ†¥„Åß‰ºöË©±„Åô„Çã„ÄÇ",
            "‰æ°ÂÄ§Ë¶≥„ÅÆÈÅï„ÅÑ„ÇíÂèó„ÅëÂÖ•„Çå„ÄÅÂ§â„Åà„Çà„ÅÜ„Å®„Åõ„ÅöÁèæÁä∂Á∂≠ÊåÅ„ÇíÁõÆÊåá„Åô„ÄÇ",
            "ÂÖ±ÈÄö„ÅÆË∂£Âë≥„ÇÑË©±È°å„ÇíË¶ã„Å§„Åë„Çã„Çà„Çä„ÄÅ„Åä‰∫í„ÅÑ„ÅÆÂ∞ÇÈñÄÂàÜÈáé„ÇíÂ∞äÈáç„Åô„Çã„ÄÇ",
            "ÊÑüÊÉÖÁöÑ„Å´„Å™„Çâ„Åö„ÄÅ‰∫ãÂÆü„Éô„Éº„Çπ„Åß„ÅÆ‰ºöË©±„ÇíÂøÉ„Åå„Åë„Çã„ÄÇ",
            "ÊôÇÈñì„ÇíÂå∫Âàá„Å£„Å¶Áü≠ÊôÇÈñì„Åß„ÅÆÊé•Ëß¶„Å´Áïô„ÇÅ„Çã„ÄÇÈï∑ÊôÇÈñì„ÅØÂç±Èô∫„Åß„Åô„ÄÇ"
        ];

        function createStars() {
            var starsContainer = document.getElementById('stars');
            var numberOfStars = 100;
            for (var i = 0; i < numberOfStars; i++) {
                var star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        function validateInputs() {
            var mbti = document.getElementById('mbtiSelect').value;
            var blood = document.getElementById('bloodSelect').value;
            var zodiac = document.getElementById('zodiacSelect').value;
            var button = document.getElementById('diagnoseButton');
            button.disabled = !mbti || !blood || !zodiac;
        }

        function getRandomElement(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function startDiagnosis() {
            var mbti = document.getElementById('mbtiSelect').value;
            var blood = document.getElementById('bloodSelect').value;
            var zodiac = document.getElementById('zodiacSelect').value;
            if (!mbti || !blood || !zodiac) return;
            
            document.querySelector('.input-form').style.display = 'none';
            var loading = document.getElementById('loading');
            loading.classList.add('active');
            
            setTimeout(function() {
                showResult(mbti, blood, zodiac);
            }, Math.random() * 1000 + 2000);
        }

        function showResult(userMbti, userBlood, userZodiac) {
            var loading = document.getElementById('loading');
            var resultArea = document.getElementById('resultArea');
            var mapping = mbtiMapping[userMbti];
            var worstMbti = mapping.worstMatch;
            var conflictType = mapping.conflictType;
            
            var bloodTypes = ['A', 'B', 'O', 'AB'];
            var zodiacs = ['Áâ°ÁæäÂ∫ß', 'Áâ°ÁâõÂ∫ß', 'ÂèåÂ≠êÂ∫ß', 'ËüπÂ∫ß', 'ÁçÖÂ≠êÂ∫ß', '‰πôÂ•≥Â∫ß', 'Â§©Áß§Â∫ß', 'Ë†çÂ∫ß', 'Â∞ÑÊâãÂ∫ß', 'Â±±ÁæäÂ∫ß', 'Ê∞¥Áì∂Â∫ß', 'È≠öÂ∫ß'];
            var worstBlood = getRandomElement(bloodTypes);
            var worstZodiac = getRandomElement(zodiacs);
            
            var userNickname = mbtiNicknames[userMbti];
            var worstNickname = mbtiNicknames[worstMbti];
            var codeName = userNickname + ' vs ' + worstNickname;
            var codeAlias = 'Áµ∂ÂØæ„Å´ÁµÑ„Åæ„Åõ„Å¶„ÅØ„ÅÑ„Åë„Å™„ÅÑ ' + userMbti + '√ó' + worstMbti + ' „Éö„Ç¢';
            var conflictDescription = conflictTemplates[conflictType];
            var countermeasure = getRandomElement(countermeasures);
            var testimony = getRandomElement(testimonies);
            
            currentResult = {
                user: { mbti: userMbti, blood: userBlood, zodiac: userZodiac },
                worst: { mbti: worstMbti, blood: worstBlood, zodiac: worstZodiac },
                codeName: codeName,
                codeAlias: codeAlias
            };
            
            document.getElementById('userType').innerHTML = userMbti + ' √ó ' + userBlood + 'Âûã √ó ' + userZodiac + '<br><small style="color: #888; margin-top: 10px; display: block;">' + mbtiPersonality[userMbti] + '</small>';
            document.getElementById('worstType').innerHTML = worstMbti + ' √ó ' + worstBlood + 'Âûã √ó ' + worstZodiac + '<br><small style="color: #888; margin-top: 10px; display: block;">' + mbtiPersonality[worstMbti] + '</small>';
            document.getElementById('codeName').textContent = codeName;
            document.getElementById('codeAlias').textContent = codeAlias;
            document.getElementById('codeDescription').textContent = conflictDescription;
            document.getElementById('countermeasureText').textContent = countermeasure;
            document.getElementById('testimonyText').textContent = testimony;
            
            loading.classList.remove('active');
            resultArea.classList.add('active');
        }

        function shareToTwitter() {
            if (!currentResult) return;
            var shareText = 'ZURE MATCHË®∫Êñ≠ÁµêÊûúÔºöÁßÅ„ÅÆÁõ∏ÊÄßÊúÄÊÇ™„Çø„Ç§„Éó„ÅØ' + currentResult.codeAlias + '„Åß„Åó„ÅüÔºÅ„Åì„ÅÆË®∫Êñ≠„ÄÅÂ¶ô„Å´ÂΩì„Åü„Å£„Å¶„ÇãÊ∞ó„Åå„Åô„Çã... #ZUREMATCH #Áõ∏ÊÄßË®∫Êñ≠';
            var shareUrl = window.location.href;
            var twitterUrl = 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(shareText) + '&url=' + encodeURIComponent(shareUrl);
            window.open(twitterUrl, '_blank', 'width=600,height=400');
        }

        function shareToLine() {
            if (!currentResult) return;
            var shareText = 'ZURE MATCH„ÅßÁõ∏ÊÄßË®∫Êñ≠„Åó„Å¶„Åø„Åæ„Åó„ÅüÔºÅÁßÅ„ÅÆÁõ∏ÊÄßÊúÄÊÇ™„Çø„Ç§„Éó„ÅØ' + currentResult.codeAlias + '„Åß„Åó„ÅüüòÖ„ÅÇ„Å™„Åü„ÇÇË©¶„Åó„Å¶„Åø„Å¶ÔºÅ';
            var shareUrl = window.location.href;
            if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                var lineUrl = 'https://line.me/R/msg/text/?' + encodeURIComponent(shareText + ' ' + shareUrl);
                window.location.href = lineUrl;
            } else {
                var lineUrl = 'https://social-plugins.line.me/lineit/share?url=' + encodeURIComponent(shareUrl) + '&text=' + encodeURIComponent(shareText);
                window.open(lineUrl, '_blank', 'width=600,height=400');
            }
        }

        function restartDiagnosis() {
            var resultArea = document.getElementById('resultArea');
            var inputForm = document.querySelector('.input-form');
            resultArea.classList.remove('active');
            inputForm.style.display = 'block';
            document.getElementById('mbtiSelect').value = '';
            document.getElementById('bloodSelect').value = '';
            document.getElementById('zodiacSelect').value = '';
            validateInputs();
            currentResult = null;
            window.scrollTo(0, 0);
        }

        document.addEventListener('DOMContentLoaded', function() {
            createStars();
            document.getElementById('mbtiSelect').addEventListener('change', validateInputs);
            document.getElementById('bloodSelect').addEventListener('change', validateInputs);
            document.getElementById('zodiacSelect').addEventListener('change', validateInputs);
            validateInputs();
        });
    </script>
</body>
</html>
